<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Project 2</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <h1>Nichole's Giphy Search</h1>
    <div class="container">
      <header>
        <form id="search-form">
          <input id="search-input" type="text" placeholder="search" />
          <button type="submit">Search</button>
        </form>
      </header>
      <div id="results" class="results"></div>
    </div>

    <script>
      const searchForm = document.getElementById(`search-form`);
      const searchInput = document.getElementById(`search-input`);
      const resultsEl = document.getElementById(`results`);

      searchForm.addEventListener("submit", function (event) {
        event.preventDefault();
        const q = searchInput.value;
        search(q);
      });

      function search(q) {
        const apiKey = "AUvmYb74kkIXU6pNC3bkktdBj7awEgHR";
        const path = `https://api.giphy.com/v1/gifs/search?api_key=${apiKey}&q=${q}`;

        fetch(path)
          .then(function (res) {
            return res.json();
          })
          .then(function (json) {
            console.log(json.data[0].images.fixed_width.url);

            let resultsHTML = ``;

            json.data.forEach(function (obj) {
              console.log(obj.images.fixed_width);
              const url = obj.images.fixed_width.url;
              const width = obj.images.fixed_width.width;
              const height = obj.images.fixed_width.height;
              const title = obj.title;

              resultsHTML += `<img 
                    class = "item" 
                    src = "${url}" 
                    width = "${width}" 
                    height = "${height}"
                    alt = "${title}" 
                    >`;
            });

            resultsEl.innerHTML = resultsHTML;
          })
          .catch(function (err) {
            console.log(err.message);
          });
      }
    </script>
  </body>
</html>
